Раздел 1. Проектирование и подготовка архитектуры

1.1 Анализ предметной области

Разрабатываемая система «TechMarket API» представляет собой headless-приложение (REST API) для размещения объявлений о продаже техники (новой и бывшей в употреблении) и заключения сделок между пользователями.

Система предназначена для:
 • размещения объявлений о продаже техники;
 • поиска и фильтрации предложений;
 • взаимодействия продавца и покупателя;
 • фиксации факта совершения сделки.

Основные участники системы:
 1. Пользователь (USER)
 • может размещать объявления;
 • просматривать объявления;
 • инициировать сделки;
 • управлять своими объявлениями.
 2. Администратор (ADMIN)
 • управляет пользователями;
 • может модерировать объявления;
 • имеет расширенные права доступа.

⸻

1.2 Формирование требований

Функциональные требования

Система должна обеспечивать:
 1. Регистрацию и аутентификацию пользователей.
 2. Управление ролями пользователей.
 3. Создание, редактирование и удаление объявлений.
 4. Фильтрацию и пагинацию объявлений.
 5. Создание и подтверждение сделок.
 6. Изменение статусов объявлений:
 • ACTIVE
 • RESERVED
 • SOLD

⸻

Нефункциональные требования
 1. Безопасность:
 • JWT-аутентификация
 • Защита эндпоинтов
 2. Поддержка REST API стандартов.
 3. Масштабируемость архитектуры.
 4. Контейнеризация через Docker.
 5. Использование линтера и автоформатирования.
 6. Наличие unit-тестов.
 7. Автоматическая проверка через GitHub Actions.

⸻

1.3 Выбор архитектурного стиля

Для проекта выбрана многослойная архитектура (Layered Architecture).

Структура слоёв:

Controller (REST API)
        ↓
Service (Бизнес-логика)
        ↓
Repository (Работа с БД)
        ↓
Database (PostgreSQL)

Причины выбора:
 • Простота реализации
 • Понятность структуры
 • Соответствие enterprise-подходу
 • Удобство тестирования

⸻

1.4 Выбор технологического стека

Backend:
 • Java 17
 • Spring Boot

База данных:
 • PostgreSQL

Документация API:
 • Swagger / OpenAPI

Тестирование:
 • JUnit
 • Mockito

Контейнеризация:
 • Docker
 • docker-compose

Контроль качества:
 • Checkstyle
 • google-java-format
 • Git hooks
 • GitHub Actions

⸻

1.5 Проектирование структуры базы данных

Таблица users

Поле Тип Описание
id UUID Идентификатор
email VARCHAR Email пользователя
password VARCHAR Хеш пароля
role ENUM USER / ADMIN
created_at TIMESTAMP Дата регистрации


⸻

Таблица listings

Поле Тип Описание
id UUID Идентификатор
title VARCHAR Название
brand VARCHAR Бренд
price DECIMAL Цена
condition ENUM NEW / USED
status ENUM ACTIVE / RESERVED / SOLD
owner_id UUID Владелец
created_at TIMESTAMP Дата создания


⸻

Таблица deals

Поле Тип Описание
id UUID Идентификатор
listing_id UUID Объявление
buyer_id UUID Покупатель
status ENUM PENDING / APPROVED / COMPLETED
created_at TIMESTAMP Дата создания


⸻

1.6 Проектирование REST API

Базовый путь:

/api/v1/

Примеры:

POST   /api/v1/auth/register
POST   /api/v1/auth/login

GET    /api/v1/listings
POST   /api/v1/listings
PATCH  /api/v1/listings/{id}
DELETE /api/v1/listings/{id}

POST   /api/v1/deals
PATCH  /api/v1/deals/{id}

Принципы:
 • Использование существительных в URL
 • Правильные HTTP-методы
 • Корректные статус-коды
 • Единый формат ответа об ошибке

