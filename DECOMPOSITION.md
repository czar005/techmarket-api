# Декомпозиция проекта «TechMarket API»

## 1. Проектирование и подготовка архитектуры (ЛР1)

### 1.1 Анализ предметной области
Проект представляет собой headless-приложение (REST API) для размещения и покупки техники (новой и б/у).

Основные участники системы:
- Пользователь (покупатель/продавец)
- Администратор

Основные сущности:
- User
- Listing (объявление)
- Deal (сделка)

---

### 1.2 Формирование требований

#### Функциональные требования:
- Регистрация и авторизация пользователей
- Создание, редактирование и удаление объявлений
- Фильтрация и пагинация объявлений
- Создание и подтверждение сделок
- Управление статусами объявлений

#### Нефункциональные требования:
- Безопасность (JWT-аутентификация)
- Масштабируемость
- Контейнеризация
- Поддержка линтинга и автоформатирования
- Наличие unit-тестов

---

### 1.3 Проектирование архитектуры

Архитектурный стиль:
- Layered Architecture (Controller → Service → Repository)

Стек технологий:
- Java 17
- Spring Boot
- PostgreSQL
- Docker

API versioning:
- /api/v1/

---

### 1.4 Проектирование базы данных

Таблицы:
- users
- listings
- deals

Связи:
- User 1:N Listing
- User 1:N Deal
- Listing 1:1 Deal

---

## 2. Реализация бизнес-логики (ЛР2)

### 2.1 Аутентификация и авторизация
- Регистрация пользователя
- Вход в систему
- Генерация JWT
- Разграничение ролей (USER / ADMIN)

---

### 2.2 Работа с объявлениями

Функции:
- Создание объявления
- Редактирование
- Удаление
- Получение списка
- Фильтрация по:
  - бренду
  - цене
  - состоянию
- Пагинация
- Сортировка

---

### 2.3 Работа со сделками

Функции:
- Создание запроса на покупку
- Подтверждение сделки продавцом
- Изменение статуса объявления (active → reserved → sold)
- Завершение сделки

---

### 2.4 Обработка ошибок

- Глобальный Exception Handler
- Единый формат ответа с ошибкой
- Корректные HTTP-статусы

---

## 3. Обеспечение качества кода (ЛР3)

### 3.1 Линтер
Подключение статического анализатора кода (например, Checkstyle).

---

### 3.2 Code Style Fixer
Использование инструмента автоформатирования кода (google-java-format).

---

### 3.3 Unit-тестирование
- Тестирование сервисного слоя
- Тестирование бизнес-логики
- Использование JUnit и Mockito
- Минимальное покрытие 60%

---

### 3.4 Git Hooks
- Настройка pre-commit hook
- Автоматический запуск линтера и тестов перед коммитом

---

### 3.5 CI (GitHub Actions)
- Автоматическая сборка проекта
- Проверка линтера
- Запуск unit-тестов

---

## 4. Документация и развертывание (ЛР4)

### 4.1 Документация API
- Интеграция Swagger (OpenAPI)
- Описание всех эндпоинтов
- Примеры запросов и ответов

---

### 4.2 README.md
README должен содержать:
- Описание проекта
- Стек технологий
- Инструкцию по запуску
- Описание API
- Пример запуска через Docker

---

### 4.3 Контейнеризация

- Dockerfile для backend-приложения
- docker-compose для запуска:
  - backend
  - PostgreSQL
- Использование переменных окружения

---

### 4.4 Финальное тестирование
- Проверка запуска через Docker
- Проверка всех эндпоинтов
- Проверка корректности работы бизнес-логики
